<ion-view
  hide-back-button="true">
  <ion-nav-bar>
    <form class="bar bar-header bar-assertive item-input-inset" ng-submit="search.search()">
      <label class="item-input-wrapper">
        <i class="icon ion-ios-search placeholder-icon"></i>
        <input
        type="search"
        placeholder="{{ 'SEARCH_INPUT_PLACEHOLDER' | translate }}"
        ng-model='search.text'
        ng-model-options="{ debounce: 500 }"
        ng-keypress='search.enterHandler($event)'/>
      </label>
      <button class="button button-clear" type="button" ng-click="search.clear()">
        <i class="icon ion-ios-close-outline"></i>
      </button>
    </form>
  </ion-nav-bar>
  <ion-content padding="false">
    <div>
      <div class="padding" ng-show="search.noResult">
        <h4>
          {{ 'NOT_RESULT_FOR_SEARCH' | translate }}
        </h4>
      </div>
      <ion-list class="products featured">
        <ion-item
          ng-repeat="product in search.products track by $index"
          class="product-featured {{ product.attributes.status }}">
          <div class="container" nf-if="hasPicture(product.relationships.product_pictures)">
            <header>
              <a ui-sref="users.productDetails({productID: product.id})">
                <img class="thumbnail" src="{{ product.relationships.product_pictures[0].attributes.small_url }}">
              </a>
            </header>
          </div>
        </ion-item>
        <ion-infinite-scroll
          ng-if="!search.noResult"
          on-infinite="search.search(search.page, true)"
          distance="50%"
          immediate-check="false">
        </ion-infinite-scroll>
      </ion-list>
    </div>
  </ion-content>
</ion-view>
